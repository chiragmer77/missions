<!--Container Main start-->
<div class="p-3">
    <div class="top_header float-start w-100">
        <div class="screen-heading">
            <h3 class="float-start">
                Mission
            </h3>
            <div class="top_action float-end">
                <ul>
                    <li *ngIf="isSearchVisible" class="search-input">
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="Search..."
                                [(ngModel)]="pagePayload.Search" (input)="updateSearchQuery()" />
                            <span class="input-group-text" (click)="closeSearchInput()">
                                <i class="bi bi-x"></i>
                            </span>
                        </div>
                    </li>
                    <li *ngIf="!isSearchVisible">
                        <a class="m_slider" (click)="toggleSearchInput()">
                            <i class="bi bi-search"></i>
                        </a>
                    </li>
                    <li>
                        <a class="m_slider" (click)="openFilterModal()">
                            <i class="bi bi-sliders2-vertical"></i>
                        </a>
                    </li>
                    <li>
                        <app-add-mission (onClose)="handleChildComponentClose()"></app-add-mission>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="Container p-0">
        <div class="row p-0">
            <div class="mission_details">
                <ul>
                    <li *ngFor="let data of missionList | paginate: { itemsPerPage: 5, currentPage: p }">
                        <div class="row">
                            <div class="col-xl-4 col-md-4 col-sm-6 col-12 m_task_details"
                                (click)="setProjectData(data)">
                                <h4><a>{{data.title}} </a></h4>
                                <p>{{data.startDate |date: 'M/d/yy, h:mm a'}} - {{data.endDate | date: 'M/d/yy, h:mm
                                    a'}}</p>
                            </div>

                            <div class="col-xl-2 col-md-2 col-sm-3 col-6 m_task_status">
                                <h4 class="not-started" *ngIf="data.status === 1"><a>Not-Started</a></h4>
                                <h4 class="in-progress" *ngIf="data.status === 2"><a>In-progress</a></h4>
                                <h4 class="completed" *ngIf="data.status === 3"><a>Completed</a></h4>
                                <p>Status</p>
                            </div>

                            <div class="col-xl-2 col-md-2 col-sm-3 col-6 m_client_name">
                                <h4><a>{{data.client}}</a></h4>
                                <p>Client Name</p>
                            </div>

                            <div class="col-xl-2 col-md-2 col-sm-3 col-6 m_task_persons">
                                <div class="progress mt-3">
                                    <div class="progress-bar progress-bar-striped progress-bar-animated"
                                        role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"
                                        [style.width.%]="(data.totalTaskCompleted / data.totalTask) * 100">
                                        {{(data.totalTaskCompleted / data.totalTask) * 100 | number:'1.0-0'}}
                                        {{(data.totalTaskCompleted / data.totalTask) * 100 > 0 ? '%' : ''}}
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-2 col-md-2 col-sm-3 col-6 m_task_progress">
                                <ng-container *ngIf="data.members.length > 0">
                                    <span *ngFor="let member of data.members.slice(0, 3)" class="m_img_thumbnail"
                                        [style.background]="sharedService.getBackgroundColor(member)"
                                        data-bs-toggle="tooltip" tooltip="{{member}}"
                                        [options]="sharedService.toolTipOption">
                                        {{sharedService.getFirstLetter(member)}}
                                    </span>
                                </ng-container>
                                <!-- Show a count of the remaining members if more than 3 -->
                                <span *ngIf="data.members.length > 3" class="m_img_thumbnail" data-bs-toggle="tooltip"
                                    tooltip="{{data.members.length - 3 + ' more'}}"
                                    [options]="sharedService.toolTipOption">
                                    +{{ data.members.length - 3 }}
                                </span>

                                <button type="button" class="btn float-end" (click)="deleteProject(data)">
                                    <i class="bi bi-trash3"></i>
                                </button>
                                <button type="submit" class="btn float-end" (click)="editDetails(data)">
                                    <i class="bi bi-pencil-square"></i>
                                </button>

                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="text-end mt-4">
                <pagination-controls (pageChange)="p = $event"></pagination-controls>
            </div>
        </div>
    </div>
</div>

<app-confirmation-modal (onClose)="onCloseConfirmationModal($event)" [isOpen]="isConfirmationModalOpen"
    [title]="modalTitle" [message]="modalMessage"></app-confirmation-modal>

<app-popover (onClose)="onCloseFilterEvent($event)" [isOpenFilter]="isFilterModal"></app-popover>
<!--Container Main end-->